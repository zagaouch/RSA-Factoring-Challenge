#!/usr/bin/env bash

# Function to check if a number is prime
is_prime() {
    local num=$1
    if [ $num -le 1 ]; then
        return 1
    fi
    for ((i = 2; i * i <= num; i++)); do
        if [ $((num % i)) -eq 0 ]; then
            return 1
        fi
    done
    return 0
}

# Function to factorize a number and print the factorization
factorize() {
    local num=$1
    local num1
    local num2

    for ((num1 = 2; num1 <= num; num1++)); do
        num2=$((num / num1))
        if [ $((num1 * num2)) -eq $num ]; then
            if is_prime "$num1" && is_prime "$num2"; then
                echo "$num=$num1*$num2"
                return
            fi
        fi
    done

    # If no prime factorization is found, print the original number
    echo "$num"
}

if [ $# -ne 1 ]; then
    echo 'Usage: ./factors <file>'
    exit 1
fi

input_file="$1"

if [ ! -e "$input_file" ]; then
    echo "Input file '$input_file' not found."
    exit 1
fi

while read -r number; do
    factorize "$number"
done < "$input_file"
